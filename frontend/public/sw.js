(()=>{self.addEventListener("push",function(t){let n=t.data.json();t.waitUntil(self.registration.showNotification(n.title,{body:n.body,icon:n.icon||"/icons/app-icon-192.png",badge:n.badge||"/icons/app-icon-192.png",data:n.data,actions:n.actions||[]})),t.waitUntil((async()=>{for(let t of(await clients.matchAll({includeUncontrolled:!0})))t.postMessage({type:"SPEAK_MESSAGE",message:n.body})})())});let t="http://localhost:5001/api";self.addEventListener("notificationclick",n=>{n.notification.close();let{meetingId:i,token:a}=n.notification.data;if(console.log(n.action),"confirm"===n.action)n.waitUntil(fetch("".concat(t,"/agent/meetings/update-status/").concat(i),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({status:"confirmed"})}));else if("cancel"===n.action)n.waitUntil(fetch("".concat(t,"/agent/meetings/update-status/").concat(i),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({status:"cancelled"})}));else{var o;n.waitUntil(clients.openWindow((null==(o=n.notification.data)?void 0:o.url)||"/"))}})})();